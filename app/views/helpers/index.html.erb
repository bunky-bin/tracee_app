<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">

<div class="container" align="center">

 <h1>Helpers near you</h1>
  <br>
  <div style="width: 100%; height: 350px;"
    data-controller="mapbox"
    data-mapbox-markers-value="<%= @markers.to_json %>"
    data-mapbox-api-key-value="<%= ENV['pk.eyJ1IjoidGxhLXZlbGxlIiwiYSI6ImNsMXBkMDdueDBiaGwzb211Z2FlNXVueWwifQ.OOXcEebwEtmLujTGMFyTeg'] %>">
  </div>
</div>
<br>


<% @helpers.each do |helper| %>
<div class="container" align="center">
  <% if helper.availability == true %>
    <div class="row">
        <div class="col-sm-4">
            <div class="card user-card">
                <div class="card-block">
                  <h6 class="f-w-600 m-t-25 m-b-10"><%=" #{helper.first_name}  #{helper.last_name} "  %></h6><br>
                    <div class="user-image">
                      <% if helper.photo.attached? %>
                        <%= cl_image_tag(helper.photo.key, class: "avatar-large") %>
                      <% end %>
                    </div>
                    <br>
                    <p class="text-muted">Available to Help</p>
                    <p class="text-muted">- Distance -</p>
                    <hr>
                    <p class="m-t-15 text-muted">Bio:<%=" #{helper.bio} "  %></p>
                    <%=link_to "Connect ", helper_path(helper), class: "btn" %>
                    <hr>
                    <div class="row justify-content-center user-social-link">
                        <div class="col-auto"><a href="#!"><i class="fa fa-facebook text-facebook"></i></a></div>
                        <div class="col-auto"><a href="#!"><i class="fa fa-twitter text-twitter"></i></a></div>
                        <div class="col-auto"><a href="#!"><i class="fa fa-dribbble text-dribbble"></i></a></div>
                    </div>
                </div>
            </div>
  <% end %>
        </div>
    </div>
</div>
<% end %>

<div class= "container" align= "relative">
  <div id='map' style='width: 1000px; height: 300px; center;'></div>
</div>
<script>

// I believe this needs to go here but its not linked to the correct page/path
// mapboxgl.accessToken = 'pk.eyJ1IjoidGxhLXZlbGxlIiwiYSI6ImNsMXBkMDdueDBiaGwzb211Z2FlNXVueWwifQ.OOXcEebwEtmLujTGMFyTeg';
// const map = new mapboxgl.Map({
// container: 'map', // container ID
// style: 'mapbox://styles/mapbox/streets-v11', // style URL
// center: [-74.5, 40], // starting position [lng, lat]
// zoom: 9 // starting zoom
// });

// </script>

// </body>
// </html>
